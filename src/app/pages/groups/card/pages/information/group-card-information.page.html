<div class="app-card-page">
  <app-header></app-header>

  <div class="app-card-page-elements">
    <div class="app-card-page-left-menu" app-group-menu [groupId]="group.id" [currentTab]="'INFORMATION'"></div>

    <div class="app-card-page-content-scrollable">
      <ng-container *ngIf="!loadingInProgress">
        <div class="app-card-page-title">
          Информация
        </div>

        <br>

        <div class="form-group">
          <label for="color" style="color: #ffffff">Цвет:</label>
          <input class="form-control" id="color" [(colorPicker)]="group.color" [style.background]="group.color"/>
        </div>

        <br>

        <app-form-input-control
          [label]="'Старший преподаватель'"
          [valid]="!!group.bookName && group.bookName.indexOf('?') === -1">
          <app-select-staff-member-control
            [items]="staffMembers"
            [staffMemberLogin]="group.headTeacherLogin"
            (onChange)="group.headTeacherLogin = $event">
          </app-select-staff-member-control>
        </app-form-input-control>

        <br>

        <app-form-input-control
          [label]="'Название учебника'"
          [valid]="!!group.bookName && group.bookName.indexOf('?') === -1">
          <app-text-control
            [value]="group.bookName"
            [placeholder]="'Название учебника'"
            (onChange)="group.bookName = $event">
          </app-text-control>
        </app-form-input-control>

        <br>

        <app-form-input-control
          [label]="'Тип группы'"
          [valid]="!!group.type">
          <app-select-group-type-control
            [value]="group.type"
            (onChange)="group.type = $event">
          </app-select-group-type-control>
        </app-form-input-control>

        <br>

        <app-form-input-control
          [label]="'Уровень'"
          [valid]="!!group.educationLevel">
          <app-select-education-level-control
            [value]="group.educationLevel"
            (onChange)="group.educationLevel = $event">
          </app-select-education-level-control>
        </app-form-input-control>

        <br>

        <app-form-input-control
          [label]="'Возраст'"
          [valid]="!!group.educationLevel">
          <app-select-age-control
            [value]="group.age"
            (onChange)="group.age = $event">
          </app-select-age-control>
        </app-form-input-control>

        <br>

        <app-form-input-control
          [label]="'Кабинет'"
          [valid]="!!group.educationLevel">
          <app-select-cabinet-control
            [items]="cabinets"
            [cabinetId]="group.cabinetId"
            (onChange)="group.cabinetId = $event">
          </app-select-cabinet-control>
        </app-form-input-control>

        <br>

        <div style="display: flex; flex-direction: row; justify-content: space-between;">
          <div class="app-card-page-title">Занятия:</div>

          <div class="app-card-page-link" (click)="toggleInactiveLessons()">
            <ng-container *ngIf="!showInactiveLessons">
              Показывать неактивные
            </ng-container>
            <ng-container *ngIf="showInactiveLessons">
              Скрывать неактивные
            </ng-container>
          </div>
        </div>

        <div *ngIf="lessons.length === 0">
          <br>

          Занятия не назначены

          <br>
          <br>
        </div>

        <br>

        <app-group-card-information-lesson-row
          *ngFor="let lesson of lessons; let i = index;"
          [lesson]="lesson"
          [staffMembers]="staffMembers"
          (click)="setExistingModalLesson(lesson, i)">
        </app-group-card-information-lesson-row>

        <br>

        <button class="app-button-primary" (click)="setNewModalLesson()">
          Добавить занятие
        </button>

        <br>
      </ng-container>
    </div>

    <div class="app-card-page-right-menu">
    </div>
  </div>

  <div class="app-card-page-footer">
    <button [disabled]="loadingInProgress || loadingInProgress || !group.id" class="app-button-danger pull-right horizontal-item" (click)="delete()">
      Удалить
    </button>

    <button [disabled]="loadingInProgress || loadingInProgress" class="app-button-primary pull-right" (click)="save()">
      Сохранить
    </button>
  </div>
</div>

<app-group-card-information-assign-lesson-popup
  [cabinets]="cabinets"
  [staffMembers]="staffMembers">
</app-group-card-information-assign-lesson-popup>
