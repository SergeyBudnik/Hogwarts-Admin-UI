<div class="page">
  <app-header [activeSection]="'STUDENTS'"></app-header>

  <div class="list-header-container">
    <div class="list-header">
      <div class="student-validation-column"></div>

      <div app-search-text-input-control class="students-list-header-search student-name-column"
           [placeholder]="'Имя или номер телефона'"
           (onChange)="onFilterChange($event, undefined, undefined)"></div>

      <div class="student-groups-column-header">
        <div class="list-header-label">
          Группы
        </div>
      </div>

      <div app-search-select-control class="students-list-header-search student-payments-column"
           [empty]="'Все'"
           [items]="getPaymentItems()"
           (onChange)="onFilterChange(undefined, $event, undefined)"></div>

      <div app-search-select-control class="students-list-header-search student-status-column"
           [empty]="'Все'"
           [items]="getStatusItems()"
           [defaultItem]="'STUDYING'"
           (onChange)="onFilterChange(undefined, undefined, $event)"></div>

    </div>

    <div class="students-list-header-add-new">
      <button class="btn btn-primary pull-right" (click)="goToNewStudentPage()">
        Добавить
      </button>
    </div>
  </div>

  <div class="list-content">
    <div class="page-loading" *ngIf="loadingInProgress">
      <div class="app-loader"></div>
    </div>

    <div *ngFor="let student of students" (click)="goToStudentPage(student.id)" class="list-row-clickable">
      <div class="list-row-item student-validation-column">
        <app-field-validation-sign *ngIf="student.statusType === 'STUDYING' || student.statusType === 'STOPPED'" [valid]="isStudentFilled(student)"></app-field-validation-sign>
      </div>
      <div class="list-row-item student-name-column">
        <div>{{student.name}}</div>
      </div>
      <div class="list-row-item student-groups-column-item">
        <div *ngFor="let studentGroup of getStudentsActiveGroups(student)">
          <div app-group-icon [group]="getGroup(studentGroup.groupId)"></div>
        </div>
      </div>
      <div class="list-row-item student-payments-column">
        {{getPayments(student.id)}} ₽
      </div>
      <div class="list-row-item student-status-column-item">
        <div app-student-status [studentStatusType]="student.statusType"></div>
      </div>
    </div>
  </div>
</div>
